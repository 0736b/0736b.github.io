<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.png" />
		<meta name="viewport" content="width=device-width" />
		<meta http-equiv="content-security-policy" content="">
		<link href="../_app/immutable/assets/_layout-07caabca.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/start-66c94dc6.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index-2d773ad7.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons-fedff77c.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper-9b728935.js">
		<link rel="modulepreload" href="../_app/immutable/components/pages/_layout.svelte-af07c81e.js">
		<link rel="modulepreload" href="../_app/immutable/modules/pages/_layout.js-872bd3f4.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_layout-80922366.js">
		<link rel="modulepreload" href="../_app/immutable/components/pages/blog/_slug_/_page.svelte-062832da.js">
		<link rel="modulepreload" href="../_app/immutable/modules/pages/blog/_slug_/_page.js-b3d7f80e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_page-e78c37ab.js">
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">


<main><div class="container mx-auto max-w-3xl font-rubik my-20"><h1 class="font-bold mb-5 text-5xl">SvelteKit .env secrets</h1>
	<article class="prose prose-neutral lg:prose-xl"><p>So SvelteKit is super awesome n’ all and the best thing ever but have
you ever tried to use a <code>.env</code> secret that you didn’t want exposed on
the client?</p>
<p>SvelteKit uses <a href="https://vitejs.dev/" rel="nofollow">Vite</a> and it has a specific way to reference <a href="https://vitejs.dev/guide/env-and-mode.html#env-variables" rel="nofollow">Env
Variables and Modes</a>, you reference a <code>.env</code> variable with
<code>({}).VITE_NAME_OF_VARIABLE</code> the <code>VITE_*</code> prefix means in
SvelteKit it makes that variable available on the client.</p>
<h2>What if you have a secret key?</h2>
<p>So if you want a secret key that’s not exposed to the client then,
what? Remove the <code>VITE_*</code> prefix? Well, no, so, how to have secrets??</p>
<p>The answer is don’t use Vite and instead use something to load the
variables from the <code>.env</code> file.</p>
<p>Use <a href="https://www.npmjs.com/package/env-cmd" rel="nofollow">env-cmd</a> or <a href="https://www.npmjs.com/package/dotenv" rel="nofollow">dotenv</a> or whatever you want to use to ensure the
runtime <code>process.env</code> is populated in dev.</p>
<h2>Example</h2>
<p>Here I have defined my <code>.env</code> file at the root of my project:</p>
<pre class="language-python"><!-- HTML_TAG_START --><code class="language-python">VITE_CLIENT_VARIABLE<span class="token operator">=</span>wheeeeeeeee
SUPER_SECRET_SECRET<span class="token operator">=</span>shhhhhh</code><!-- HTML_TAG_END --></pre>
<p>Then I’ve created a <code>secret.js</code> file to access my secret:</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">API_URL</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">[</span><span class="token string">'SUPER_SECRET_SECRET'</span><span class="token punctuation">]</span></code><!-- HTML_TAG_END --></pre>
<p>Then I’ve added <code>env-cmd</code> to my <code>dev</code> script in my <code>package.json</code> so
that <code>process.env</code> has the super secret secret populated:</p>
<pre class="language-json"><!-- HTML_TAG_START --><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"env-cmd svelte-kit dev"</span><span class="token punctuation">,</span></code><!-- HTML_TAG_END --></pre>
<p>Now I can access my super secret secret and have client side variables
too.</p>
<h2>Thanks!</h2>
<p>A kind thank you to Discord users <code>Xyo</code> and especially <code>saikatdas0790</code>
on the Svelte Discord <code>svelte-kit</code> channel for helping me out with
this!</p></article></div></main>


		<script type="module" data-sveltekit-hydrate="nvfzx5">
			import { start } from "../_app/immutable/start-66c94dc6.js";

			start({
				env: {},
				paths: {"base":"","assets":""},
				target: document.querySelector('[data-sveltekit-hydrate="nvfzx5"]').parentNode,
				version: "1670748455068",
				hydrate: {
					node_ids: [0, 4],
					data: [null,null],
					form: null
				}
			});
		</script>
	</div>
	</body>
</html>
